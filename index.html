<!DOCTYPE html>
<html lang="en">

<head>
  <title>Mobile Shopping</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="author" content="">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <link rel="stylesheet" type="text/css" href="assets/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="assets/icomoon/icomoon.css">
  <link rel="stylesheet" type="text/css" media="all"
    href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/vendor.css">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <!-- script
    ================================================== -->
  <script src="assets/js/modernizr.js"></script>
  <style>
    .image-holder {
      width: 100%;
      height: 400px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .image-holder img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5); /* semi-transparent background */
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000; /* Ensure modal is on top of other content */
  }
  
  .modal-dialog {
      background-color: #fff;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
      max-width: 400px;
      width: 100%;
      margin: 20px;
      z-index: 1010; /* Ensure modal content is above modal background */
  }
  

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 10px;
      border-bottom: 1px solid #ddd;
    }

    .modal-title {
      margin: 0;
    }

    .modal-body {
      padding: 10px 0;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 10px;
    }

    .close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <header id="header">
    <div id="header-wrap">
      <nav class="secondary-nav border-bottom">
        <div class="container">
          <div class="row d-flex align-items-center sticky">
            <div class="col-md-4 col-sm-12 user-items">
              <ul class="d-flex justify-content-end list-unstyled">
                <li>
                  <a href="login.html">
                    <i class="icon icon-user"></i>
                  </a>
                </li>
                <li>
                  <a href="cart.html">
                    <i class="icon icon-shopping-cart"></i>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nav>
      <nav class="primary-nav padding-small">
        <div class="container">
          <div class="row d-flex align-items-center">
            <div class="col-lg-2 col-md-2">
              <div class="main-logo">
                <a href="index.html">
                  <img src="assets/images/logo.jpeg" alt="logo">
                </a>
              </div>
            </div>
            <div class="col-lg-10 col-md-10">
              <div class="navbar">

                <div id="main-nav" class="stellarnav d-flex justify-content-end right">
                  <ul class="menu-list">

                    <li class="menu-item has-sub">
                      <a href="index.html" class="item-anchor active d-flex align-item-center"
                        data-effect="Home">Home</a>
                    </li>

                    <li class="menu-item has-sub">
                      <a href="#selling-products" class="item-anchor d-flex align-item-center"
                        data-effect="Shop">Shop</a>
                    </li>
                    <li><a href="login/login.html" class="item-anchor" data-effect="Contact">Login</a></li>
                    <li><a href="register/register_user.html" class="item-anchor" data-effect="Contact">Sign Up</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <section id="billboard" class="overflow-hidden">

    <div class="swiper main-swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide"
          style="background-image: url('assets/images/24.jpg');background-repeat: no-repeat;background-size: cover;background-position: center;">
          <div class="banner-content">
            <div class="container">
              <div class="row">
                <div class="col-md-6">
                  <h3 class="banner-title">Mobile Shopping & Accessories</h3>
                  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed eu feugiat amet, libero ipsum enim
                    pharetra hac.</p>

                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="swiper-slide"
          style="background-image: url('assets/images/banner2.jpg');background-repeat: no-repeat;background-size: cover;background-position: center;">
          <div class="banner-content">
            <div class="container">
              <div class="row">
                <div class="col-md-6">
                  <h2 class="banner-title">Casual Collection</h2>
                  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed eu feugiat amet, libero ipsum enim
                    pharetra hac.</p>
                  <div class="btn-wrap">
                    <a href="shop.html" class="btn btn-light btn-light-arrow btn-medium d-flex align-items-center"
                      tabindex="0">Shop it now <i class="icon icon-arrow-io"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="featured-products" class="product-store">
    <div class="container">
      <div class="section-header d-flex flex-wrap align-items-center justify-content-between">
        <h2 class="section-title">Top Trending</h2>
      </div>
      <div class="swiper product-swiper overflow-hidden">
        <div class="swiper-wrapper">

        </div>
      </div>

    </div>

  </section>

  <section id="selling-products" class="product-store bg-light-grey">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Best selling products</h2>
      </div>
      <ul class="tabs list-unstyled">
        <li data-tab-target="#all" class="active tab">All</li>
        <li data-tab-target="#samsung" class="tab">Samsung</li>
        <li data-tab-target="#iphone" class="tab">IPhone</li>
        <!-- <li data-tab-target="#pants" class="tab">Huawei</li>
        <li data-tab-target="#hoodie" class="tab">Infinix</li>
        <li data-tab-target="#outer" class="tab">Pods</li>
        <li data-tab-target="#jackets" class="tab">Wear</li>
        <li data-tab-target="#accessories" class="tab">Accessories</li> -->
      </ul>
      <div class="tab-content">
        <div id="all" data-tab-content class="active">
          <div class="row d-flex flex-wrap">

          </div>

        </div>
        <div id="samsung" data-tab-content>
          <div class="row d-flex flex-wrap">

          </div>

        </div>
        <div id="iphone" data-tab-content>
          <div class="row d-flex flex-wrap">

          </div>

          <script>
           

         
          </script>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal -->
  <div id="addToCartModal" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add to Cart</h5>
                <button type="button" class="close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addToCartForm" method="POST">
                    <p id="modalProductName"></p>
                    <p id="modalProductPrice"></p>
                    <label for="quantity">Quantity:</label>
                    <input type="number" id="quantity" name="quantity" min="1" value="1" required>
                    <input type="hidden" id="productId" name="productId">
                    <input type="hidden" id="productName" name="productName">
                    <input type="hidden" id="productPrice" name="productPrice">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Close</button>
                        <button type="button" class="btn btn-primary" onclick="addToCart()">Add to Cart</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      fetchTrendingProducts();
      fetchAllProducts();
      fetchSamsungProducts();
      fetchIphoneProducts();
    });

    function fetchTrendingProducts() {
      fetch('product/fetch_trending_products.php')
        .then(response => response.json())
        .then(data => {
          const section = document.getElementById('featured-products');
          const swiperWrapper = section.querySelector('.swiper-wrapper');
          swiperWrapper.innerHTML = ''; // Clear existing slides

          data.forEach(product => {
            const slide = document.createElement('div');
            slide.classList.add('swiper-slide');

            slide.innerHTML = `
                        <div class="product-item">
                            <div class="image-holder">
                                <img src="shopping/${product.image_url}" alt="${product.name}" class="product-image">
                            </div>
                            <div class="cart-concern">
                                <div class="cart-button d-flex justify-content-between align-items-center">
                                    <button type="button" class="btn-wrap cart-link d-flex align-items-center" onclick="openModal(${product.id}, '${product.name}', ${product.price})">add to cart <i class="icon icon-arrow-io"></i></button>
                                </div>
                            </div>
                            <div class="product-detail">
                                <h3 class="product-title">
                                    <a href="single-product.html">${product.name}</a>
                                </h3>
                                <span class="item-price text-primary">Tsh ${product.price}</span>
                            </div>
                        </div>
                    `;

            swiperWrapper.appendChild(slide);
          });
        })
        .catch(error => console.error('Error fetching trending products:', error));
    }

    function fetchAllProducts() {
      fetch('product/fetch_products.php')
        .then(response => response.json())
        .then(data => {
          const container = document.querySelector('#all .row');
          container.innerHTML = ''; // Clear existing content

          data.forEach(product => {
            const productItem = document.createElement('div');
            productItem.classList.add('product-item', 'col-lg-3', 'col-md-6', 'col-sm-6');

            productItem.innerHTML = `
                        <div class="image-holder">
                            <img src="shopping/${product.image_url}" alt="${product.name}" class="product-image">
                        </div>
                       <div class="cart-concern">
                                <div class="cart-button d-flex justify-content-between align-items-center">
                                    <button type="button" class="btn-wrap cart-link d-flex align-items-center" onclick="openModal(${product.id}, '${product.name}', ${product.price})">add to cart <i class="icon icon-arrow-io"></i></button>
                                </div>
                            </div>
                        <div class="product-detail">
                            <h3 class="product-title">
                                <a href="single-product.html">${product.name}</a>
                            </h3>
                            <div class="item-price text-primary">$${product.price}</div>
                        </div>
                    `;

            container.appendChild(productItem);
          });
        })
        .catch(error => console.error('Error fetching all products:', error));
    }

    function fetchSamsungProducts() {
      fetch('product/fetch_samsung_products.php')
        .then(response => response.json())
        .then(data => {
          const container = document.querySelector('#samsung .row');
          container.innerHTML = ''; // Clear existing content

          data.forEach(product => {
            const productItem = document.createElement('div');
            productItem.classList.add('product-item', 'col-lg-3', 'col-md-6', 'col-sm-6');

            productItem.innerHTML = `
                        <div class="image-holder">
                            <img src="shopping/${product.image_url}" alt="${product.name}" class="product-image">
                        </div>
                        <div class="cart-concern">
                                <div class="cart-button d-flex justify-content-between align-items-center">
                                    <button type="button" class="btn-wrap cart-link d-flex align-items-center" onclick="openModal(${product.id}, '${product.name}', ${product.price})">add to cart <i class="icon icon-arrow-io"></i></button>
                                </div>
                            </div>
                        <div class="product-detail">
                            <h3 class="product-title">
                                <a href="single-product.html">${product.name}</a>
                            </h3>
                            <div class="item-price text-primary">$${product.price}</div>
                        </div>
                    `;

            container.appendChild(productItem);
          });
        })
        .catch(error => console.error('Error fetching Samsung products:', error));
    }
    function fetchIphoneProducts() {
      fetch('product/fetch_iphone_products.php')
        .then(response => response.json())
        .then(data => {
          const container = document.querySelector('#iphone .row');
          container.innerHTML = ''; // Clear existing content

          data.forEach(product => {
            const productItem = document.createElement('div');
            productItem.classList.add('product-item', 'col-lg-3', 'col-md-6', 'col-sm-6');

            productItem.innerHTML = `
                        <div class="image-holder">
                            <img src="shopping/${product.image_url}" alt="${product.name}" class="product-image">
                        </div>
                        <div class="cart-concern">
                                <div class="cart-button d-flex justify-content-between align-items-center">
                                    <button type="button" class="btn-wrap cart-link d-flex align-items-center" onclick="openModal(${product.id}, '${product.name}', ${product.price})">add to cart <i class="icon icon-arrow-io"></i></button>
                                </div>
                            </div>
                        <div class="product-detail">
                            <h3 class="product-title">
                                <a href="single-product.html">${product.name}</a>
                            </h3>
                            <div class="item-price text-primary">$${product.price}</div>
                        </div>
                    `;

            container.appendChild(productItem);
          });
        })
        .catch(error => console.error('Error fetching Iphone products:', error));
    }
   
    function openModal(productId, productName, productPrice) {
    
      document.getElementById('modalProductName').innerText = productName;
      document.getElementById('modalProductPrice').innerText = productPrice;
      document.getElementById('productId').value = productId;
      document.getElementById('productName').value = productName;
      document.getElementById('productPrice').value = productPrice;

      document.getElementById('addToCartModal').style.display = 'flex';
  }
    function closeModal() {
      const modal = document.getElementById('addToCartModal');
      modal.style.display = 'none'; // Hide the modal
    }

    function addToCart() {
      const userId = sessionStorage.getItem('userId');
    
          window.location.href = 'login/login.html';
      
      closeModal();
    }

  </script>
  <script src="assets/js/jquery-1.11.0.min.js"></script>
  <script src="assets/js/plugins.js"></script>
  <script src="assets/js/script.js"></script>
</body>

</html>